<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Payment ‚Äî Shanti Palace</title>

  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header><h1>Complete Payment</h1></header>

<main style="padding:18px;max-width:720px;margin:18px auto">
  <div style="background:#fff;padding:16px;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.06)">
    <p><strong>Name:</strong> <span id="p_name"></span></p>
    <p><strong>Phone:</strong> <span id="p_phone"></span></p>
    <p><strong>Room:</strong> <span id="p_room"></span></p>
    <p><strong>Check-In:</strong> <span id="p_checkin"></span></p>
    <p><strong>Check-Out:</strong> <span id="p_checkout"></span></p>
    <p style="font-size:18px"><strong>Amount:</strong> ‚Çπ<span id="p_amount"></span></p>

    <button id="payBtn" class="btn btn-book" style="margin-top:12px">
      Pay Now
    </button>
  </div>
</main>

<script>
/* ===============================
   LOAD BOOKING DETAILS
================================ */
const name       = localStorage.getItem('fullName') || '';
const email      = localStorage.getItem('email') || '';
const phone      = localStorage.getItem('phone') || '';
const checkIn    = localStorage.getItem('checkIn') || '';
const checkOut   = localStorage.getItem('checkOut') || '';
const members    = localStorage.getItem('members') || '';
const roomType   = localStorage.getItem('roomType') || '';
const totalDays  = localStorage.getItem('totalDays') || '';
const finalAmount= localStorage.getItem('finalAmount') || 0;

/* DISPLAY */
document.getElementById('p_name').innerText = name;
document.getElementById('p_phone').innerText = phone;
document.getElementById('p_room').innerText = roomType;
document.getElementById('p_checkin').innerText = checkIn;
document.getElementById('p_checkout').innerText = checkOut;
document.getElementById('p_amount').innerText = finalAmount;

/* ===============================
   PAYMENT
================================ */
document.getElementById('payBtn').addEventListener('click', function () {

  if (!name || !phone || !finalAmount) {
    alert("Booking details missing. Please go back and try again.");
    return;
  }

  const amountPaise = Math.round(Number(finalAmount) * 100);

  const options = {
    key: "rzp_live_RkeY8hnUYgxlKN",   // üîê real key hosting pe daalna
    amount: amountPaise,
    currency: "INR",
    name: "Shanti Palace Vrindavan",
    description: "Room Booking Payment",

    /* ‚≠ê CRITICAL FIX ‚≠ê */
    callback_url: "success.html",

    prefill: {
      name: name,
      email: email,
      contact: phone
    },

    theme: {
      color: "#7a1f1f"
    }
  };

  const rzp = new Razorpay(options);
  rzp.open();
});
</script>

</body>
</html>

