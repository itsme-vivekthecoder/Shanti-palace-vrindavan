<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Booking Successful</title>

<style>
body {
  font-family: Arial;
  background: #f5f5f5;
  padding: 20px;
  text-align: center;
}
.box {
  background: white;
  padding: 22px;
  border-radius: 10px;
  max-width: 400px;
  margin: auto;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
h2 { color: #2e7d32; }
.btn {
  width: 100%;
  padding: 12px;
  margin-top: 15px;
  background: #c27802;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="box">
  <h2>Payment Successful üéâ</h2>
  <p>Your booking is confirmed.</p>

  <button class="btn" onclick="sendWhatsApp()">Send Confirmation via WhatsApp</button>
  <button class="btn" style="background:#1976d2;" onclick="sendSMS()">Send Confirmation via SMS</button>
</div>

<script>
/* üîπ Get payment ID from URL */
const params = new URLSearchParams(window.location.search);
const paymentId = params.get("payment_id") || "";

/* üîπ Save payment ID */
if (paymentId) {
  localStorage.setItem("paymentId", paymentId);
}

/* üîπ Get booking details from localStorage */
const name = localStorage.getItem("fullName") || "";
const email = localStorage.getItem("email") || "";
const phone = localStorage.getItem("phone") || "";
const checkIn = localStorage.getItem("checkIn") || "";
const checkOut = localStorage.getItem("checkOut") || "";
const members = localStorage.getItem("members") || "";
const roomType = localStorage.getItem("roomType") || "";
const totalDays = localStorage.getItem("totalDays") || "";
const finalAmount = localStorage.getItem("finalAmount") || "";

/* üîπ Save booking to Google Form */
const googleFormURL =
  "https://docs.google.com/forms/d/e/1FAIpQLSciTMHoPTqDOYNXGWZ-U01QO0cihDlAUwiwuu2HjZbXwTLucw/formResponse";

const formData = new URLSearchParams({
  "entry.1181525787": name,
  "entry.26796576": email,
  "entry.1505113845": phone,
  "entry.133939998": roomType,
  "entry.8435932": checkIn,
  "entry.1082238197": checkOut,
  "entry.516627955": totalDays,
  "entry.1301069124": members,
  "entry.764039404": finalAmount,
  "entry.2021412614": paymentId
});

fetch(googleFormURL, {
  method: "POST",
  mode: "no-cors",
  headers: { "Content-Type": "application/x-www-form-urlencoded" },
  body: formData.toString()
});

/* üîπ WhatsApp */
function sendWhatsApp() {
  const msg = `üôè Radhe Radhe ${name}

Your booking is CONFIRMED ‚úÖ

Room: ${roomType}
Check-In: ${checkIn}
Check-Out: ${checkOut}
Amount: ‚Çπ${finalAmount}
Payment ID: ${paymentId}

Shanti Palace Vrindavan`;

  window.open(
    "https://wa.me/91" + phone + "?text=" + encodeURIComponent(msg),
    "_blank"
  );
}

/* üîπ SMS */
function sendSMS() {
  const msg = `Radhe Radhe ${name}

Booking CONFIRMED
Room: ${roomType}
Check-In: ${checkIn}
Check-Out: ${checkOut}
Amount: ‚Çπ${finalAmount}
Payment ID: ${paymentId}

Shanti Palace Vrindavan`;

  window.location.href =
    "sms:91" + phone + "?body=" + encodeURIComponent(msg);
}
</script>

</body>
</html>
